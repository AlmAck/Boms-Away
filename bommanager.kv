#:kivy 1.9.0

#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import getcwd os.getcwd


<SelectableList>:
    component_view: list_view_id
    BoxLayout:
        ListView:
            id: list_view_id
            scroll_distance: 120
            size_int: (1.0, .5)
            adapter:
                ListAdapter(data=[],
                selection_mode='single',
                allow_empty_selection=True,
                cls=ListItemButton)

<ComponentView>:
    top_box: top_box
    comp_list: comp_list
    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        id: top_box

        SelectableList:
            id: comp_list

<ComponentTypeView>:
    top_box: top_box
    comp_type_list: comp_type_list
    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        id: top_box

        SelectableList:
            id: comp_type_list

<SidePanel>:
    orientation: 'vertical'
    spacing: 1

    save_button: save_button_id
    export_button: export_button_id
    consolidate_button: consolidate_button_id
    MenuItem:
        text: 'Load Schematic'
        size_hint: (1.0, 0.1)

    MenuItem:
        id: save_button_id
        text: 'Save Schematic'
        size_hint: (1.0, 0.1)
        disabled: True

    MenuItem:
        id: export_button_id    
        text: 'Export BOM as CSV'
        size_hint: (1.0, 0.1)
        disabled: True

    MenuItem:
        text: '   -   '
        size_hint: (1.0, .05)
        disabled: True

    MenuItem:
        id: consolidate_button_id
        text: 'Consolidate Like Components'
        size_hint: (1.0, 0.1)
        disabled: True

    MenuItem:
        text: '   -   '
        size_hint: (1.0, .05)
        disabled: True
        
    MenuItem:
        text: 'Components'
        size_hint: (1.0, 0.1)

    MenuItem:
        text: 'Component Types'
        size_hint: (1.0, 0.1)

    Widget:
        size_hint: (1.0, .6)

    MenuItem:
        text: 'Quit'
        size_hint: (1.0, 0.1)

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: getcwd()
            filters: ['*.sch']

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<ExportDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: getcwd()
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 50
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Export"
                on_release: root.export(filechooser.path, text_input.text)